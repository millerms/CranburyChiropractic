{% assign analytics_allowed = false %}
{% if jekyll.environment == 'production' and site.analytics.provider and page.analytics != false %}
  {% assign analytics_allowed = true %}
  {% if site.analytics.provider contains 'google' %}
    {% unless site.analytics.google and site.analytics.google.tracking_id %}
      {% assign analytics_allowed = false %}
    {% endunless %}
  {% endif %}
{% endif %}

{% if analytics_allowed %}

{% case site.analytics.provider %}
{% when "google" %}
  {% include /analytics-providers/google.html %}
{% when "google-universal" %}
  {% include /analytics-providers/google-universal.html %}
{% when "google-gtag" %}
  {% include /analytics-providers/google-gtag.html %}
{% when "custom" %}
  {% include /analytics-providers/custom.html %}
{% endcase %}

{% endif %}
